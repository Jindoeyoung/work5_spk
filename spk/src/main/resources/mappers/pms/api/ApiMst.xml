<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spk.api.mapper.pms.api.ApiMstInfoMapper">

	<!-- API 마스터 등록  -->
    <insert id="insertApiMstInfo" parameterType="com.spk.api.entity.pms.api.ApiMst">
        INSERT INTO API_MST 
               (
				api_id
				,api_nm
				,method
				,uri
				,func_cd
				,rel_api_id
				,timeout
                ) 
        VALUES (
                #{API_MST.api_id},
                #{API_MST.api_nm},
                #{API_MST.method},
                #{API_MST.uri},
                #{API_MST.func_cd},
                #{API_MST.rel_api_id},
                #{API_MST.timeout}
                ) 
    </insert>
    
	<!-- API 마스터 RelApiId 수정  -->
    <insert id="updateApiMstRelApiId" parameterType="com.spk.api.entity.pms.api.ApiMst">
        UPDATE API_MST SET REL_API_ID = #{rel_api_id}
		 WHERE API_ID = #{api_id}
    </insert>    
    
	<!-- 매트릭스 등록  -->
    <insert id="insertMatrixInfo" parameterType="java.util.HashMap" statementType="CALLABLE">
		{ CALL 
			sp_add_matrix_real_2(
				#{api_id,	mode=IN, jdbcType=VARCHAR, javaType=String},
				#{spike_id,	mode=IN, jdbcType=VARCHAR, javaType=String}
			) 
		} 
    </insert>    
    
</mapper>