<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spk.api.mapper.sys.VMatrixMappers">

	<!-- 시스템메뉴유저 조회  -->
    <select id="getMatrixList" resultType="com.spk.api.entity.sys.VMatrix">
        SELECT * 
          FROM MATRIX
         WHERE GUBUN = #{gubun}
           AND SEQ in (15,16) 
    </select>
    
	<!-- 전체 spike_id 리스트 조회  -->
    <select id="getAllSpikeIdList" resultType="com.spk.api.entity.sys.VMatrix">
	    SELECT a.SPIKE_ID, a.SEQ
	      FROM MATRIX a
	     WHERE a.SEQ = (SELECT MAX(x.SEQ) FROM MATRIX x WHERE x.SPIKE_ID = a.SPIKE_ID)
	  ORDER BY a.SEQ
    </select>
    
	<!-- spike_id 별 처리할 위젯 리스트 조회  -->
    <select id="getSpikeIdMatrixList" resultType="com.spk.api.entity.sys.VMatrix">
	    SELECT *
	      FROM MATRIX
	     WHERE GUBUN = #{gubun}
	       AND SPIKE_ID = #{spike_id}
    </select>    
    
</mapper>